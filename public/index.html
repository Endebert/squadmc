<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Squad MC">
  <link rel="apple-touch-icon" sizes="57x57" href="./favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="./favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="./favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="./favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="./favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="./favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="./favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="./favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="./favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="./favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
  <link rel="manifest" href="./favicon/manifest.json">

  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage" content="./favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#000000">

  <title>SquadMC - A map-based mortar elevation and bearing calculator for Squad</title>

  <!--leaflet-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css"
        integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"
          integrity="sha512-C7BBF9irt5R7hqbUm2uxtODlUVs+IsNu2UULGuZN7gM+k/mmeG4xvIEac01BtQa4YIkUpp23zZC4wIwuXaPMQA=="
          crossorigin=""></script>

  <!--EasyButton-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
  <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

  <!--leaflet source file (use for debugging)-->
  <!--<script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet-src.js"-->
  <!--crossorigin=""></script>-->

  <link rel="stylesheet" href="css/L.Control.MousePosition.css"/>
  <link rel="stylesheet" href="css/custom.css"/>
</head>
<body>
<script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>

<!--logger first-->
<script src="https://cdn.rawgit.com/jonnyreeves/js-logger/master/src/logger.min.js"></script>
<script type="application/javascript">

  // setup log level
  Logger.useDefaults();

  window.setOrToggleDebugMode = (state) => {
    if (state !== undefined) { window.DEBUG = state; } else { window.DEBUG = !window.DEBUG; }
    Logger.setLevel(window.DEBUG ? Logger.DEBUG : Logger.WARN);
    localStorage.setItem("debug", window.DEBUG.toString());
  };

  // first try to get last state of debug mode
  window.DEBUG = localStorage.getItem("debug") === "true";

  // set debug mode based on query parameter. has priority over saved state
  const urlParams = new URLSearchParams(window.location.search);
  window.DEBUG = urlParams.has("debug") ? (urlParams.get("debug") === "true") : window.DEBUG;

  window.setOrToggleDebugMode(window.DEBUG);
</script>

<!--Top ribbon containing map name, etc.-->
<div id="mapTitle" align="center">
  <div id="mapName"></div>
  <table>
    <tr>
      <td><img class="inline" src="images/mortar.png" width="16px" height="16px"/>
        <div class="inline keypad" id="mortarPos">&nbsp;&nbsp;-&nbsp;-&nbsp;</div>
      </td>
      <td><img class="inline" src="images/target.png" width="16px" height="16px"/>
        <div class="inline keypad" id="targetPos">&nbsp;&nbsp;-&nbsp;-&nbsp;</div>
      </td>
    </tr>
  </table>
  <div class="keypad" id="mapAngle">&nbsp;&nbsp;&nbsp;Â°</div>&nbsp;<div class="keypad" id="mapBearing">&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>

<!--Leaflet map holder-->
<div id="map"></div>

<!--div used for displaying mouse coordinates-->
<div id="mousecoord" class="leaflet-control-mouseposition-target"></div>

<!--Utils needs to be loaded first-->
<script type="text/javascript" src="js/Utils.js"></script>

<script type="text/javascript" src="js/MAPDATA.js"></script>
<script type="text/javascript" src="js/L.CRS.SimpleTopLeft.js"></script>
<script type="text/javascript" src="js/L.Mortar.js"></script>
<script type="text/javascript" src="js/L.Locations.js"></script>
<script type="text/javascript" src="js/L.SquadGrid.js"></script>
<script type="text/javascript" src="js/L.Control.MousePosition.js"></script>

<!--page logic, setting up map, etc.-->
<script type="text/javascript" src="js/main.js"></script>

</body>
</html>
